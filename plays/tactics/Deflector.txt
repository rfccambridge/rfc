Metadata:
type tactic
name Deflector

Parameters:

Objects:
ballpoint (pointof ball)
helpRobot (closest friendly (theirgoal) loose)

forbiddenCircle (circle (theirgoal) 0.5)

topPost (point (getXcoord (theirgoal)) 0.35)
bottomPost (point (/ (const-double FIELD_WIDTH) 2) (- 0 0.35))


pointKickTop (point (- (getXcoord topPost) 0.5) (getYcoord topPost))
pointkickBottom (point (getXcoord pointKickTop) (getYcoord bottomPost))

pointRobotTop (point (- (getXcoord pointKickTop) 0.02) (+ (getYcoord pointKickTop) 0.07))
pointRobotBottom (point (- (getXcoord pointkickBottom) 0.02) (- (getYcoord pointkickBottom) 0.07))

faceBottom (point 0 (- 0 2.02))
faceTop (point 0 2.02)

midline (line (theirgoal) (ourgoal))

Actions:

# check if we shouldn't go after the ball- that is, if it is
# in the goal and there is another robot there

(if_Action (pointAboveLine ballpoint midline) (robotpointpointmovenoavoid helpRobot pointRobotBottom faceBottom) (robotpointpointmovenoavoid helpRobot pointRobotTop faceTop))