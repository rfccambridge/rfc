Metadata:
type tactic
name OurStriker

Parameters:
striker robot
sideassist robot
enemy0 robot
enemy1 robot

Objects:
ballpoint (pointof ball)
CLEAR_DIST (const-double CLEAR_DIST)

# For shooting between Two Man Wall
midpoint (midpoint (pointof enemy0) (pointof enemy1))

# For Deflections

ourtopPost (point (getXcoord (theirgoal)) 0.35)
theirtopPost (point (getXcoord (ourgoal)) 0.35)
topPostLine (line theirtopPost ourtopPost)
sideassistpoint (pointof sideassist)

pointKickTop (point (- (getXcoord ourtopPost) 0.5) (getYcoord ourtopPost))
pointkickBottom (point (getXcoord pointKickTop) (- 0 .35))

pointRobotTop (point (- (getXcoord pointKickTop) 0.02) (+ (getYcoord pointKickTop) 0.07))
pointRobotBottom (point (- (getXcoord pointkickBottom) 0.02) (- (getYcoord pointkickBottom) 0.07))

pointKick (if_point (pointAboveLine ballpoint topPostLine) pointRobotBottom pointRobotTop)

angle (doubleArcSin (/ 0.07 (pointpointdistance ballpoint sideassistpoint)))

deflectKickpoint (if_point (pointAboveLine ballpoint topPostLine) (rotatePointAroundAnotherPoint ballpoint sideassistpoint angle) (rotatePointAroundAnotherPoint ballpoint sideassistpoint (- 0 angle)))
deflectReady (< (pointpointdistance pointKick sideassistpoint) .3)

Actions:
(if_Action (and (not (and (pointInGoal ballpoint) (robotInGoal))) (pathClear (pointof striker) (theirgoal) CLEAR_DIST)) (robotpointkick striker (theirgoal)) (if_Action (and (< (pointpointdistance ballpoint (pointof enemy0)) 0.5) (< (pointpointdistance ballpoint (pointof enemy1)) 0.5)) (robotpointkick striker midpoint) (if_Action (pathClear (pointof striker) (theirGoalBestShot) CLEAR_DIST) (robotpointkick striker (theirGoalBestShot)) (if_Action (and (pathClear (pointof striker) (pointof sideassist) CLEAR_DIST) deflectReady) (robotpointkick striker deflectKickpoint) (robotpointkick striker (theirGoalBestShot))))))

# If the ball is not in goal and robot is not in goal and if path is clear to their goal
# then shoot to their goal
# # else if there is a two man wall then shoot between them
# else if path is clear to best target
       # then shoot to best target
       # else if path is clear to side assist
	      # then shoot to SideAssist
              # else shoot to best target anyway