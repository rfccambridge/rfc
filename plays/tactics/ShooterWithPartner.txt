Metadata:
type tactic
name ShooterWithPartner

Parameters:
bot robot
support robot

Objects:
standbypoint (point -2 0.0)
range (+ 4.0 0.0)
shooterpt (pointof bot)
supportpt (pointof support)

WIDE (- (/ (const-double FIELD_WIDTH) 2) 1.0)
BACK (+ (/ (const-double FIELD_WIDTH) 2) 0.18)
ballpoint (pointof ball)

widetop (point WIDE (/ (const-double FIELD_HEIGHT) 2))
widebot (point WIDE (/ (const-double FIELD_HEIGHT) -2))
ltarget (point BACK 0.35) 
rtarget (point BACK -0.35) 
lpost (point (/ (const-double FIELD_WIDTH) 2) 0.35)
rpost (point (/ (const-double FIELD_WIDTH) 2) -0.35)
goalgoalline (line (ourgoal) (theirgoal))
widetopline (line widetop lpost)
widebotline (line widebot rpost)

standby (and (pointInGoal ballpoint) (robotInGoal))
wide (or (pointAboveLine ballpoint widetopline) (not (pointAboveLine ballpoint widebotline)))
near (and (and (< (getYcoord ballpoint) 0.35) (> (getYcoord ballpoint) -0.35)) (< (pointpointdistance ballpoint (theirgoal)) 0.5))
OOR (> (pointpointdistance ballpoint (theirgoal)) range)
JOOR (< (- (pointpointdistance ballpoint (theirgoal)) range) 0.5)
top (pointAboveLine ballpoint goalgoalline)
clearToPartner (pathClear shooterpt supportpt 3.0)
clearToLtarget (pathClear shooterpt ltarget 3.0)
clearToRtarget (pathClear shooterpt rtarget 3.0)

Actions:

# check if we shouldn't go after the ball- that is, if it is
# in the goal and there is another robot there

(if_Action standby (robotpointmove bot standbypoint) (if_Action wide (robotvariablepointkick bot supportpt 1) (if_Action near (if_Action top (if_Action clearToLtarget (robotpointkick bot ltarget) (robotpointkick bot rtarget)) (if_Action clearToRtarget (robotpointkick bot rtarget) (robotpointkick bot ltarget))) (if_Action OOR (if_Action JOOR (robotvariablepointkick bot supportpt 1) (robotvariablepointkick bot supportpt 1)) (if_Action top (if_Action clearToRtarget (robotpointkick bot rtarget) (robotvariablepointkick bot supportpt 1)) (if_Action clearToLtarget (robotpointkick bot ltarget) (robotvariablepointkick bot supportpt 1)))))))