Metadata:
type tactic
name ShooterWithPartner

Parameters:
bot robot
support robot

Objects:
standbypoint (point -2.0 0.0)
layup (point 1.8 .05)
range (+ 3.0 0.0)
shooterpt (pointof bot)
supportpt (pointof support)

WIDE (- (/ (const-double FIELD_WIDTH) 2) 1.5)
BACK (+ (/ (const-double FIELD_WIDTH) 2) 0.18)
ballpoint (pointof ball)

widetop (point WIDE (/ (const-double FIELD_HEIGHT) 2))
widebot (point WIDE (/ (const-double FIELD_HEIGHT) -2))
ltarget (point BACK 0.35) 
rtarget (point BACK -0.35) 
lpost (point (/ (const-double FIELD_WIDTH) 2) 0.35)
rpost (point (/ (const-double FIELD_WIDTH) 2) -0.35)
goalgoalline (line (ourgoal) (theirgoal))
widetopline (line widetop lpost)
widebotline (line widebot rpost)

standby (and (pointInGoal ballpoint) (robotInGoal))
wide (or (pointAboveLine ballpoint widetopline) (not (pointAboveLine ballpoint widebotline)))
near (and (and (< (getYcoord ballpoint) 0.35) (> (getYcoord ballpoint) -0.35)) (< (pointpointdistance ballpoint (theirgoal)) 0.5))
OOR (> (pointpointdistance ballpoint (theirgoal)) range)
JOOR (< (- (pointpointdistance ballpoint (theirgoal)) range) 0.5)
top (pointAboveLine ballpoint goalgoalline)
clearToLayup (pathClear botpt layup 3.0)
clearToLtarget (pathClear botpt ltarget 3.0)
clearToRtarget (pathClear botpt rtarget 3.0)
clearToLpost (pathClear botpt lpost 3.0)

Actions:

# check if we shouldn't go after the ball- that is, if it is
# in the goal and there is another robot there

(if_Action standby (robotpointmove bot standbypoint) (if_Action wide (if_Action clearToLayup (robotpointkick bot layup) (robotpointkick bot supportpt)) (if_Action near (if_Action top (if_Action clearToLtarget(robotpointkick bot ltarget) (robotpointkick bot supportpt)) (if_Action clearToRtarget(robotpointkick bot rtarget) (robotpointkick bot supportpt))) (if_Action OOR (if_Action JOOR (if_Action clearToLayup (robotpointkick bot layup) (robotpointkick bot supportpt)) (if_Action clearToLpost (robotpointkick bot lpost) (robotpointkick bot supportpt))) (if_Action top (if_Action clearToRtarget(robotpointkick bot rtarget) (robotpointkick bot supportpt)) (if_Action clearToLtarget(robotpointkick bot ltarget) (robotpointkick bot supportpt)))))))